# To better understand this file read this:
# https://docs.ionos.space/docs/github-actions-customization/

name: 'Deploy Now: Execute Build'

on:
    workflow_call:
        inputs:
            site-url:
                required: true
                type: string
            branch-id:
                required: true
                type: string

env:
    DEPLOYMENT_FOLDER: public

jobs:
    # Please do not rename this job
    build-project:
        name: build portfolio
        runs-on: ubuntu-latest
        steps:
            - name: checkout
              uses: actions/checkout@v3
              with:
                  submodules: 'recursive'

            - name: Setup Node
              uses: actions/setup-node@v3
              with:
                  node-version: v20.x

            - name: Build Node assets
              env:
                  CI: true
                  SITE_URL: ${{ inputs.site-url }}
              run: |
                  npm ci
                  npm run build

<<<<<<< HEAD
            # Please do not touch the following action
            - name: Store deployment content
              uses: ionos-deploy-now/artifact-action@v1
              with:
                  api-key: ${{ secrets.IONOS_API_KEY }}
                  service-host: api-eu.ionos.space
                  project-id: 6cda14d7-5d82-4532-94d2-bb60868ed613
                  branch-id: ${{ inputs.branch-id }}
                  version: ${{ github.sha }}
                  folder: ${{ env.DEPLOYMENT_FOLDER }}
                  config-file: .deploy-now/portfolio/config.yaml
                  action: upload
=======
# Please do not touch the following action
      - name: Store deployment content
        uses: ionos-deploy-now/artifact-action@v1
        with:
          api-key: ${{ secrets.IONOS_API_KEY }}
          service-host: api-eu.ionos.space
          project-id: c7b73489-fbae-4a28-b574-f9a66fdcbbc3
          branch-id: ${{ inputs.branch-id }}
          version: ${{ github.sha }}
          folder: ${{ env.DEPLOYMENT_FOLDER }}
          config-file: .deploy-now/portfolio/config.yaml
          action: upload
>>>>>>> 3f2d986c4a0324a376c5cde396cd69170780bbee
